
var statics = {
  year: 2019,
  wedding: 230,
  revenue: 350,
  food: 300,
  service: 400,
  lobby: 10,
  employee: 30,
  yearRevenue: [2017, 2018, 2019, 2020]
}

var revenueMonth = [
  {
    month: 'January',
    data: [
      {
        revenue: 120,
        date: '01/01/2019',
        quantity: 2,
        percentage: '15%'
      },
      {
        revenue: 80,
        date: '02/01/2019',
        quantity: 1,
        percentage: '15%'
      },
      {
        revenue: 150,
        date: '10/01/2019',
        quantity: 3,
        percentage: '15%'
      },
      {
        revenue: 120,
        date: '15/01/2019',
        quantity: 2,
        percentage: '15%'
      }
    ]
  },
  {
    month: 'February',
    data: [
      {
        revenue: 120,
        date: '01/02/2019',
        quantity: 2,
        percentage: '15%'
      },
      {
        revenue: 80,
        date: '02/02/2019',
        quantity: 1,
        percentage: '15%'
      },
      {
        revenue: 150,
        date: '10/02/2019',
        quantity: 3,
        percentage: '15%'
      },
      {
        revenue: 120,
        date: '15/02/2019',
        quantity: 2,
        percentage: '15%'
      }
    ]
  },
  {
    month: 'March',
    data: [
      {
        revenue: 120,
        date: '01/03/2019',
        quantity: 2,
        percentage: '15%'
      },
      {
        revenue: 80,
        date: '02/03/2019',
        quantity: 1,
        percentage: '15%'
      },
      {
        revenue: 150,
        date: '10/03/2019',
        quantity: 3,
        percentage: '15%'
      },
      {
        revenue: 120,
        date: '15/03/2019',
        quantity: 2,
        percentage: '15%'
      }
    ]
  },
  {
    month: 'April',
    data: [
      {
        revenue: 120,
        date: '01/04/2019',
        quantity: 2,
        percentage: '15%'
      },
      {
        revenue: 80,
        date: '02/04/2019',
        quantity: 1,
        percentage: '15%'
      }
    ]
  },
  {
    month: 'May',
    data: [
      {
        revenue: 120,
        date: '01/05/2019',
        quantity: 2,
        percentage: '15%'
      },
      {
        revenue: 80,
        date: '02/05/2019',
        quantity: 1,
        percentage: '15%'
      },
      {
        revenue: 150,
        date: '10/05/2019',
        quantity: 3,
        percentage: '15%'
      },
      {
        revenue: 120,
        date: '15/05/2019',
        quantity: 2,
        percentage: '15%'
      }
    ]
  },
  {
    month: 'June',
    data: [
      {
        revenue: 120,
        date: '01/06/2019',
        quantity: 2,
        percentage: '15%'
      },
      {
        revenue: 80,
        date: '02/06/2019',
        quantity: 1,
        percentage: '15%'
      },
      {
        revenue: 150,
        date: '10/06/2019',
        quantity: 3,
        percentage: '15%'
      },
      {
        revenue: 120,
        date: '15/06/2019',
        quantity: 2,
        percentage: '15%'
      }
    ]
  },
  {
    month: 'July',
    data: [
      {
        revenue: 120,
        date: '01/07/2019',
        quantity: 2,
        percentage: '15%'
      },
      {
        revenue: 80,
        date: '02/07/2019',
        quantity: 1,
        percentage: '15%'
      },
      {
        revenue: 150,
        date: '10/07/2019',
        quantity: 3,
        percentage: '15%'
      },
      {
        revenue: 120,
        date: '15/07/2019',
        quantity: 2,
        percentage: '15%'
      }
    ]
  },
  {
    month: 'August',
    data: [
      {
        revenue: 120,
        date: '01/08/2019',
        quantity: 2,
        percentage: '15%'
      },
      {
        revenue: 80,
        date: '02/08/2019',
        quantity: 1,
        percentage: '15%'
      }
    ]
  },
  {
    month: 'September',
    data: [
      {
        revenue: 150,
        date: '10/09/2019',
        quantity: 3,
        percentage: '15%'
      },
      {
        revenue: 120,
        date: '15/09/2019',
        quantity: 2,
        percentage: '15%'
      }
    ]
  },
  {
    month: 'March',
    data: [
      {
        revenue: 120,
        date: '01/10/2019',
        quantity: 2,
        percentage: '15%'
      },
      {
        revenue: 150,
        date: '10/10/2019',
        quantity: 3,
        percentage: '15%'
      }
    ]
  },
  {
    month: 'December',
    data: [
      {
        revenue: 120,
        date: '01/12/2019',
        quantity: 2,
        percentage: '15%'
      },
      {
        revenue: 80,
        date: '02/12/2019',
        quantity: 1,
        percentage: '15%'
      },
      {
        revenue: 150,
        date: '10/12/2019',
        quantity: 3,
        percentage: '15%'
      },
      {
        revenue: 120,
        date: '15/12/2019',
        quantity: 2,
        percentage: '15%'
      }
    ]
  },
  {
    month: 'October',
    data: [
      {
        revenue: 120,
        date: '01/10/2019',
        quantity: 2,
        percentage: '15%'
      },
      {
        revenue: 80,
        date: '02/10/2019',
        quantity: 1,
        percentage: '15%'
      }
    ]
  },
  {
    month: 'November',
    data: [
      {
        revenue: 120,
        date: '01/11/2019',
        quantity: 2,
        percentage: '15%'
      },
      {
        revenue: 80,
        date: '02/11/2019',
        quantity: 1,
        percentage: '15%'
      },
      {
        revenue: 150,
        date: '10/11/2019',
        quantity: 3,
        percentage: '15%'
      },
      {
        revenue: 120,
        date: '15/11/2019',
        quantity: 2,
        percentage: '15%'
      }
    ]
  }
  
]
var myChart;
var yearRevenue;
function drawChart(listRevenue, year) {
	yearRevenue = year;
  ctx = document.getElementById('dashboard-revenue-chart');
  ctx.height = 120;
   myChart = new Chart(ctx, {
      type: 'bar',
      data: {
          labels: [
            'January', 'February', 'March', 'April', 'May', 'June','July', 'August', 'September', 'October', 'November', 'December'],
          datasets: [{
              label: 'VND',
              data: [
                listRevenue[0],
                listRevenue[1],
                listRevenue[2],
                listRevenue[3],
                listRevenue[4],
                listRevenue[5],
                listRevenue[6],
                listRevenue[7],
                listRevenue[8],
                listRevenue[9],
                listRevenue[10],
                listRevenue[11]
              ],
              backgroundColor:'rgba(153, 102, 255, 0.2)',
              borderColor:'rgba(153, 102, 255, 1)',
              borderWidth: 1
          }]
      },
      options: {
        title: {
          display: true,
          text: "Revenue " + yearRevenue
        },
        scales: {
          yAxes: [{
              ticks: {
                  beginAtZero: true
              }
          }]
        },
      }
  });
  return true;
}
function renderContent() {
  document.getElementById("wedding").innerHTML = statics.wedding;
  document.getElementById("revenue").innerHTML = statics.revenue;
  document.getElementById("food").innerHTML = statics.food;
  document.getElementById("service").innerHTML = statics.service;
  document.getElementById("lobby").innerHTML = statics.lobby;
  document.getElementById("employee").innerHTML = statics.employee;
  document.getElementById("yearRevenue").innerHTML = 
  statics.yearRevenue.map(year => `<option value='${year}'>${year}</option>`);
  
}
function selectYear() {
  console.log(document.querySelector('option:checked').value);
  
}
document.getElementById("dashboard-revenue-chart").onclick = function(evt) {
  var activePoint = myChart.getElementAtEvent(evt);
  if (activePoint.length > 0) {
    var clickedElementindex = activePoint[0]._index;
    var month = myChart.data.labels[clickedElementindex]; 
  }
  let id;
  console.log(month);
  switch(month) {
  case 'January':
	  id = 1;
	  break;
  case 'February':
	  id = 2;
	  break;
  case 'March':
	  id = 3;
	  break;
  case 'April':
	  id = 4;
	  break;
  case 'May':
	  id = 5;
	  break;
  case 'June':
	  id = 6;
	  break;
  case 'July':
	  id = 7;
	  break;
  case 'August':
	  id = 8;
	  break;
  case 'September':
	  id = 9;
	  break;
  case 'October':
	  id = 10;
	  break;
  case 'November':
	  id = 11;
	  break;
  case 'September':
	  id = 12;
	  break;
	  default: 
		  id=1;
	  break;
  }
	  let form = document.getElementById('monthRevenue');
	  console.log(yearRevenue);
	  console.log(id);
	  console.log(form.querySelector('input[name="year"]'));
	  form.querySelector('input[name="year"]').value = yearRevenue;
	  form.querySelector('input[name="month"]').value = id;
	  form.submit();
  
//  var info;
//document.getElementById('revenue-title').innerHTML = 'Revenue Report '+ id + ' ' + yearRevenue;
//  for(let i = 0; i < revenueMonth.length; i++) {
//    if(revenueMonth[i].month === month){
//      info = revenueMonth[i].data;
//      break;
//    }
//  }
//  var i = 0;
//  var listRevenue = info.map(element => {
//    i++;
//    return `<tr><td>${i}</td><td>${element.date}</td><td>${element.quantity}</td><td>${element.revenue}</td><td>${element.percentage}</td></tr>`;
//  });
//  document.getElementById('revenue-body').getElementsByTagName('tbody')[0].innerHTML = listRevenue.join(' ');
//  $('#revenue-report').modal('show');
};

var showModal = (signal) => {
	if(signal == 1) 
		$('#revenue-report').modal('show');
	else
		$('#revenue-report').modal('hide');
}



